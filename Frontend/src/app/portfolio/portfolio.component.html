<app-header></app-header>
<p-tabView>
  <p-tabPanel header="ALL">
    <app-invested-value></app-invested-value>
    <div class="card-container">
      <div class="mycard left-card">
        <p-card header="Current">
          <p class="m-0" style="color: green; font-size: 30px">
            <b>₹ 50.6K</b>
          </p>
        </p-card>
      </div>
      <div class="mycard right-card">
        <p-card header="Invested">
          <p class="m-0" style="color: gray; font-size: 30px">
            <b>₹{{currentAmount.toFixed(2)}}</b>
          </p>
        </p-card>
      </div>
    </div>
    <h1><b>Stocks & Crypto</b></h1>
    <div class="table">
      <p-table
        [value]="filteredStocks"
        [paginator]="true"
        [rows]="4"
        class="ipo-table"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>Symbol</th>
            <th>Company Logo</th>
            <th>Company Name</th>
            <th>Invested</th>
            <th>Current</th>
            <th>Change (%)</th>
            <th>Sale Stock</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-stock>
          <tr>
            <td>{{ stock.symbol }}</td>
            <td>
              <img
                src="https://assets-netstorage.groww.in/stock-assets/logos/GSTK539254.png"
                alt="Company Logo"
                style="width: 20%"
              />
            </td>
            <td>
              <b>{{ stock.name }}</b>
            </td>
            <td>₹ {{ stock.price }}</td>
            <td><b>₹ 200.67</b></td>
            <td
              [ngClass]="{
                'change-percentage-positive': stock.changePercentage > 0,
                'change-percentage-negative': stock.changePercentage < 0
              }"
            >
              {{ stock.changePercentage }} %
            </td>
            <td>
              <p-button
                label="Sale"
                styleClass="p-button-outlined p-button-danger"
                id="Sale"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </p-tabPanel>

  <!-- Tab for Stocks -->
  <p-tabPanel header="Stocks">
    <app-invested-value></app-invested-value>
    <div class="card-container">
      <div class="mycard left-card">
        <p-card header="Current">
          <p class="m-0" style="color: green; font-size: 30px">
            <b>₹ 30.6K</b>
          </p>
        </p-card>
      </div>
      <div class="mycard right-card">
        <p-card header="Invested">
          <p class="m-0" style="color: gray; font-size: 30px">
            <b>₹ {{investedAmount.toFixed(2)}}</b>
          </p>
        </p-card>
      </div>
    </div>
    <h1><b>Stocks</b></h1>

    <div class="table">
      <p-table
        [value]="filteredStocks"
        [paginator]="true"
        [rows]="4"
        class="ipo-table"
      >
        <ng-template pTemplate="header">
<!-- <<<<<<< richin_rushi
          <tr>
            <th>Symbol</th>
            <th>Company Logo</th>
            <th>Company Name</th>
            <th>Invested</th>
            <th>Current</th>
            <th>Change (%)</th>
            <th>Sale Stock</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-stock>
          <tr>
            <td>{{ stock.symbol }}</td>
            <td>
              <img
                src="https://assets-netstorage.groww.in/stock-assets/logos/GSTK539254.png"
                alt="Company Logo"
                style="width: 20%"
              />
            </td>
            <td>
              <b>{{ stock.name }}</b>
            </td>
            <td>₹ {{ stock.price }}</td>
            <td><b>₹ 200.67</b></td>
            <td
              [ngClass]="{
                'change-percentage-positive': stock.changePercentage > 0,
                'change-percentage-negative': stock.changePercentage < 0
              }"
            >
              {{ stock.changePercentage }} %
            </td>
            <td>
              <p-button
                label="Sale"
                styleClass="p-button-outlined p-button-danger"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </p-tabPanel>

  <!-- Tab for Crypto -->
  <p-tabPanel header="Crypto">
    <app-invested-value></app-invested-value>
    <div class="card-container">
      <div class="mycard left-card">
        <p-card header="Current">
          <p class="m-0" style="color: green; font-size: 30px">
            <b>₹ 20.6K</b>
          </p>
        </p-card>
      </div>
      <div class="mycard right-card">
        <p-card header="Invested">
          <p class="m-0" style="color: gray; font-size: 30px">
            <b>₹ 17.50K</b>
          </p>
        </p-card>
      </div>
    </div>
    <h1><b>Crypto</b></h1>
    <div class="table">
      <p-table
        [value]="filteredStocks"
        [paginator]="true"
        [rows]="4"
        class="ipo-table"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>Symbol</th>
            <th>Company Logo</th>
            <th>Company Name</th>
            <th>Invested</th>
            <th>Current</th>
            <th>Change (%)</th>
            <th>Sale Stock</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-stock>
          <tr>
            <td>{{ stock.symbol }}</td>
            <td>
              <img
                src="https://assets-netstorage.groww.in/stock-assets/logos/GSTK539254.png"
                alt="Company Logo"
                style="width: 20%"
              />
            </td>
            <td>
              <b>{{ stock.name }}</b>
            </td>
            <td>₹ {{ stock.price }}</td>
            <td><b>₹ 200.67</b></td>
            <td
              [ngClass]="{
                'change-percentage-positive': stock.changePercentage > 0,
                'change-percentage-negative': stock.changePercentage < 0
              }"
            >
              {{ stock.changePercentage }} %
            </td>
            <td>
              <p-button
                label="Sale"
                styleClass="p-button-outlined p-button-danger"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </p-tabPanel>
</p-tabView> -->

            <tr>
                <th>Company Logo</th>
                <th>Company Name</th>
                <th>Quantity</th>
                <th>Buy Price</th>
                <th>Latest Traded Price</th>
                <th>current Price </th>
                <th>P/L</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-asset>
            <tr>
                <td>
                    <img src="https://assets-netstorage.groww.in/stock-assets/logos/GSTK539254.png" alt="Company Logo" style="width: 20%" />
                </td>
                <td>
                    <b>{{ asset.assetName }}</b>
                </td>
                <td>
                    <b>{{ asset.assetQuantity }}</b>
                </td>
                <td>₹ {{ asset.assetPrice.toFixed(2) }}</td>
                <td>
                    {{ asset?.currentPrice.toFixed(2) }} 
                </td>
                <td><b>₹ {{(asset.currentPrice * asset?.assetQuantity).toFixed(2) }}</b></td>
                <td  [ngClass]="{
                    'change-percentage-positive': (asset?.assetPrice  - asset?.currentPrice) >= 0,
                    'change-percentage-negative': (asset?.assetPrice  - asset?.currentPrice) < 0
                  }">{{(asset?.assetPrice  - asset?.currentPrice).toFixed(2)}}</td>
                <td><button (click)="sellAsset(asset._id)" class="sell-btn">Sell</button></td>
            </tr>
        </ng-template>
    </p-table>
</div>

